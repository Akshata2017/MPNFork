#!/bin/bash

LOG_FILE="myLog.log"

# Save original stdout to file descriptor 3
exec 3>&1

# Function to clean the log file
clean_log() {
  echo "Cleaning log file..." >&3
  > "$LOG_FILE"
  echo "Log file cleaned." >&3
}

# Check if "cleanLog" is passed as the first argument
if [ "$1" == "cleanLog" ]; then
  clean_log
  exit 0
fi

# Check if "install" is passed as the first argument
if [ "$1" == "install" ]; then
  # Redirect all output (stdout and stderr) to LOG_FILE
  # Temporarily comment this out for debugging
  # exec > "$LOG_FILE" 2>&1

  # Install dependencies
  echo "Installing dependencies..."
  npm install

  INSTALL_EXIT_CODE=$?

  if [ $INSTALL_EXIT_CODE -eq 0 ]; then
    # Output success message to stdout
    echo "Dependencies installed successfully" >&3
    exit 0
  else
    echo "Dependency installation failed" >&3
    exit 1
  fi

# ... [Rest of the script remains unchanged] ...
