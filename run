#!/bin/bash


#VARIABLES TRACKING DEPENDENCIES

numDepenedenciesInstalledInstalled=0
dependencyList=('typescript' 'blab341lablabla' 'ts-node')

# Check if "install" is passed as the first argument
if [ "$1" == "install" ]; then #the command after run is install "./run install"
  # for i in ${dependencyList[@]}; do #loop through the dependency list
    
  #   echo "installing $i..." 
    
  #   if npm install "$i"; then #check if dependency installation succeeded
  #     echo "$i installed successfully"
  #     numDepenedenciesInstalled=$((numDepenedenciesInstalled + 1))
    
  #   else
  #     echo "$i installation failed, skipping" #Failure to install dependency
  #   fi
  
  # done  
  # echo "$numDepenedenciesInstalled dependencies installed..." #print number of successfull installations 
  counter=-3
  actualCounter=0
  for dep in `npm ls`
    do
      ((counter = counter + 1))
      if (( counter < 0 )); then
        # echo "skippings $dep"
        continue
      fi
      if (( counter % 2 == 0 )); then
        # echo "skipping $dep"
        continue
      fi
      ((actualCounter = actualCounter + 1))
      echo "preparing $dep"
    done
  echo "installing $actualCounter dependencies..."
  npm i


elif  [[ -f "$1" ]]; then
  echo "Found it!!!!!"
  tsc
  node build/cliClass.js $1  
else
  echo "invalid command"
fi

